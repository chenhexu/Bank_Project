# üè¶ BlueBank Project - System Architecture

## üìä **High-Level System Overview**

```mermaid
graph TB
    subgraph "üåê Client Layer"
        WebBrowser[Web Browser]
        MobileBrowser[Mobile Browser]
        DesktopBrowser[Desktop Browser]
    end
    
    subgraph "‚òÅÔ∏è Cloud Infrastructure"
        CloudflareCDN[Cloudflare CDN]
        AWSLightsail[AWS Lightsail]
        PostgreSQL[AWS RDS PostgreSQL]
    end
    
    subgraph "üê≥ Container Layer"
        NginxProxy[Nginx Reverse Proxy]
        NextjsFrontend[Next.js Frontend]
        FastAPIBackend[FastAPI Backend]
    end
    
    subgraph "üîê Authentication Providers"
        GoogleOAuth[Google OAuth 2.0]
        FacebookOAuth[Facebook OAuth 2.0]
        EmailPassword[Email/Password]
    end
    
    subgraph "üìß External Services"
        GmailSMTP[Gmail SMTP]
        GoogleConsole[Google Cloud Console]
        MetaDevelopers[Meta for Developers]
    end
    
    %% Client to CDN (bidirectional)
    WebBrowser <--> CloudflareCDN
    MobileBrowser <--> CloudflareCDN
    DesktopBrowser <--> CloudflareCDN
    
    %% CDN to Lightsail (bidirectional)
    CloudflareCDN <--> AWSLightsail
    
    %% Lightsail hosts the container and serves frontend
    AWSLightsail --> NginxProxy
    NginxProxy <--> NextjsFrontend
    
    %% Frontend makes API calls to backend (internal)
    NextjsFrontend <--> FastAPIBackend
    
    %% Backend connects to database (bidirectional)
    FastAPIBackend <--> PostgreSQL
    
    %% Backend connects to external services (bidirectional)
    FastAPIBackend <--> GmailSMTP
    
    %% Frontend OAuth flows (user redirected to providers)
    NextjsFrontend --> GoogleOAuth
    NextjsFrontend --> FacebookOAuth
    
    %% OAuth providers redirect back to frontend
    GoogleOAuth --> NextjsFrontend
    FacebookOAuth --> NextjsFrontend
    
    %% Backend handles authentication
    FastAPIBackend <--> GoogleOAuth
    FastAPIBackend <--> FacebookOAuth
    NextjsFrontend <--> EmailPassword
    EmailPassword <--> FastAPIBackend
    
    %% OAuth providers managed through their consoles
    GoogleOAuth -.-> GoogleConsole
    FacebookOAuth -.-> MetaDevelopers
```

## üèóÔ∏è **Detailed Component Architecture**

### **Frontend Layer (Next.js)**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Frontend (Next.js)                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üì± Pages:                                                  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /login          - Authentication                       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /register       - User Registration                    ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /oauth-callback - OAuth Redirect Handler              ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /balance        - Account Dashboard                    ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /deposit        - Money Deposit                        ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /withdraw       - Money Withdrawal                     ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /transfer       - Money Transfer                       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /history        - Transaction History                  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ /profile        - User Profile Management              ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üé£ Custom Hooks:                                           ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ useGoogleAuth   - Google OAuth Integration             ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ useFacebookAuth - Facebook OAuth Integration           ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ useDarkMode     - Theme Management                     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üé® UI Components:                                         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ AnimatedDigit   - Balance Animation                    ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ CounterScroller - Number Scrolling Effect              ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ DarkModeContext - Theme Context Provider               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Backend Layer (FastAPI)**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Backend (FastAPI)                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üîå API Endpoints:                                         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /api/auth/google      - Google OAuth Handler          ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /api/auth/facebook    - Facebook OAuth Handler        ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /auth/google/config   - Google OAuth Configuration    ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /auth/facebook/config - Facebook OAuth Configuration  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /api/login            - Traditional Login             ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /api/register         - User Registration             ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /api/profile          - User Profile Management       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /api/setup-password   - Setup Password for OAuth      ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /api/change-password  - Change User Password          ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /api/balance          - Account Balance               ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /api/deposit          - Money Deposit                 ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /api/withdraw         - Money Withdrawal              ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /api/transfer         - Money Transfer                ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ /api/transactions     - Transaction History           ‚îÇ
‚îÇ                                                            ‚îÇ
‚îÇ  üóÑÔ∏è Core Services:                                         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Authentication        - OAuth + Password Auth         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ User Management      - CRUD Operations                ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Banking Operations   - Financial Transactions         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Email Service        - SMTP via Gmail                 ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Security             - Password Hashing, JWT          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Database Layer (PostgreSQL)**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                Database Schema (PostgreSQL)                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üë• Users Table:                                            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ id (Primary Key)                                      ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ username (Unique)                                     ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ email (Unique)                                        ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ hashed_password                                       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ display_name                                          ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ auth_provider         - email/google/facebook         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ oauth_id             - OAuth Provider User ID        ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ is_active                                            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ is_admin                                             ‚îÇ
‚îÇ                                                            ‚îÇ
‚îÇ  üí∞ Accounts Table:                                        ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ id (Primary Key)                                      ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ user_id (Foreign Key)                                 ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ balance                                               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ account_type                                         ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üí∏ Transactions Table:                                    ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ id (Primary Key)                                      ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ from_account_id                                       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ to_account_id                                         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ amount                                                ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ transaction_type      - deposit/withdraw/transfer     ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ timestamp                                             ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ status                                               ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üîë Recovery Codes Table:                                  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ id (Primary Key)                                      ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ user_id (Foreign Key)                                 ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ code_hash                                            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ expires_at                                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîÑ **Data Flow Architecture**

### **Authentication Flow**
```mermaid
sequenceDiagram
    participant U as User
    participant F as Frontend
    participant B as Backend
    participant DB as Database
    participant O as OAuth Provider

    Note over U,DB: Google/Facebook OAuth Flow
    U->>F: Click OAuth Button
    F->>O: Redirect to OAuth
    O->>F: Return with Code
    F->>B: Send OAuth Code
    B->>O: Verify Token
    O->>B: User Info
    B->>DB: Check/Create User
    DB->>B: User Data
    B->>F: Authentication Success
    F->>U: Redirect to Dashboard

    Note over U,DB: Traditional Login Flow
    U->>F: Enter Email/Password
    F->>B: Send Credentials
    B->>DB: Verify Password
    DB->>B: User Data
    B->>F: Authentication Success
    F->>U: Redirect to Dashboard
```

### **Banking Operations Flow**
```mermaid
sequenceDiagram
    participant U as User
    participant F as Frontend
    participant B as Backend
    participant DB as Database

    Note over U,DB: Transaction Flow
    U->>F: Initiate Transaction
    F->>B: Send Transaction Request
    B->>DB: Validate Balance
    B->>DB: Create Transaction Record
    B->>DB: Update Account Balance
    B->>F: Transaction Success
    F->>U: Show Updated Balance
```

## üê≥ **Container Architecture**

### **Docker Container Structure**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                Docker Container (Port 80)                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üöÄ Supervisor (Process Manager)                           ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Backend Service    - FastAPI on Port 8000            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Frontend Service   - Next.js on Port 3000            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Nginx Service      - Reverse Proxy on Port 80        ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üåê Nginx Configuration:                                    ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /api/* ‚Üí Backend (Port 8000)                         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ /* ‚Üí Frontend (Port 3000)                            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Static Files ‚Üí Frontend Build                         ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üîß Environment Variables:                                  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ DATABASE_URL         - PostgreSQL Connection          ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ GOOGLE_CLIENT_ID     - OAuth Configuration            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ FACEBOOK_APP_ID      - OAuth Configuration            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ GMAIL_EMAIL          - SMTP Configuration             ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ ENVIRONMENT          - dev/production                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üåç **Deployment Architecture**

### **Production Environment**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Production Stack                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üåê Domain: bluebank.unifra.org                            ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üõ°Ô∏è Cloudflare:                                            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ CDN & Caching                                         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ SSL/TLS Termination                                   ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ DDoS Protection                                       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Global Edge Network                                   ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚òÅÔ∏è AWS Lightsail:                                         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Virtual Private Server                                ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Docker Container                                      ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Port 80 (HTTP)                                        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Firewall Rules                                        ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üóÑÔ∏è AWS RDS:                                               ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ PostgreSQL Database                                   ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Automated Backups                                     ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Multi-AZ Deployment                                   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Security Groups                                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Development Environment**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Development Stack                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üíª Local Development:                                     ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Frontend: npm run dev (Port 3000)                    ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Backend: uvicorn main:app --reload (Port 8000)       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Database: Local SQLite (Optional)                     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üê≥ Docker Development:                                    ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ docker-compose.dev.yml                                ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Frontend: Port 3000                                   ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Backend: Port 8000                                    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Nginx: Port 8080                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîê **Security Architecture**

### **Authentication & Authorization**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                Security Layers                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üõ°Ô∏è OAuth 2.0 Security:                                   ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Google OAuth          - Verified by Google            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Facebook OAuth        - Verified by Meta              ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ State Validation      - CSRF Protection               ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üîê Password Security:                                     ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ bcrypt Hashing        - Salt + Hash                   ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Session Management    - sessionStorage                 ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Password Validation   - Strength Requirements         ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üåê Network Security:                                       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ HTTPS Only            - TLS 1.3                       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ CORS Configuration    - Origin Validation             ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Rate Limiting         - API Protection                ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Input Validation      - SQL Injection Prevention      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üì± **User Experience Flow**

### **Complete User Journey**
```mermaid
journey
    title BlueBank User Experience Flow
    section Registration
      Visit Site: 5: User
      Choose Auth Method: 4: User
      Complete OAuth/Registration: 5: User
      Redirect to Balance: 5: User
    section Banking
      View Balance: 5: User
      Make Transaction: 4: User
      View History: 4: User
      Manage Profile: 3: User
    section Security
      Two-Factor Setup: 4: User
      Password Management: 3: User
      Account Linking: 4: User
```

## üöÄ **Scalability Considerations**

### **Horizontal Scaling Strategy**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                Scalability Architecture                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üìà Load Balancer:                                         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Multiple Container Instances                          ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Health Checks                                         ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Auto-scaling Groups                                   ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üóÑÔ∏è Database Scaling:                                      ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Read Replicas                                         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Connection Pooling                                    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Query Optimization                                    ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üöÄ Performance:                                            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Redis Caching                                         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ CDN for Static Assets                                 ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ API Response Caching                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîß **Technology Stack Summary**

| Layer | Technology | Version | Purpose |
|-------|------------|---------|---------|
| **Frontend** | Next.js | 14.x | React Framework with SSR |
| **Backend** | FastAPI | 0.104.x | Python API Framework |
| **Database** | PostgreSQL | 15.x | Primary Database |
| **Container** | Docker | 24.x | Application Containerization |
| **Proxy** | Nginx | 1.26.x | Reverse Proxy & Load Balancer |
| **Process Manager** | Supervisor | 4.x | Service Management |
| **Authentication** | OAuth 2.0 | - | Google & Facebook Integration |
| **Deployment** | AWS Lightsail | - | Cloud Infrastructure |
| **CDN** | Cloudflare | - | Content Delivery & Security |
| **Email** | Gmail SMTP | - | Transaction Notifications |

## üìã **API Endpoints Summary**

| Method | Endpoint | Description | Authentication |
|--------|----------|-------------|----------------|
| `POST` | `/api/register` | User Registration | None |
| `POST` | `/api/login` | User Login | None |
| `POST` | `/api/auth/google` | Google OAuth | Google Token |
| `POST` | `/api/auth/facebook` | Facebook OAuth | Facebook Token |
| `GET` | `/auth/google/config` | Google OAuth Config | None |
| `GET` | `/auth/facebook/config` | Facebook OAuth Config | None |
| `POST` | `/api/profile` | User Profile | Email + Password |
| `POST` | `/api/setup-password` | Setup Password for OAuth | Email + Password |
| `POST` | `/api/change-password` | Change User Password | Email + Password |
| `POST` | `/api/balance` | Account Balance | Email + Password |
| `POST` | `/api/deposit` | Money Deposit | Email + Password |
| `POST` | `/api/withdraw` | Money Withdrawal | Email + Password |
| `POST` | `/api/transfer` | Money Transfer | Email + Password |
| `POST` | `/api/transactions` | Transaction History | Email + Password |

---

*This architecture diagram represents the current state of the BlueBank project as of the latest deployment.*